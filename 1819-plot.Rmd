---
title: "Course Enrolment in Secondary Schools"
description: |
  Welcome to the website. I hope you enjoy it!
site: distill::distill_website
---

At the juvenile age of 14, students are forced to make a decision that will make or break their high school life. That decision is picking out their freshman year courses. Courses range from vague and broad, such as Mathematics to verbosely specific, such as Dance-Social Dance (Ballroom, Swing, Traditional Form) â€” Yes, that is a real secondary school course. It's crucial for students to know which courses are popular and generally liked among students, and it's crucial for high schools to predict the interest in their courses so they can know which ones to fund and which to discontinue.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(readxl)
library(plotly)
```

```{r 1819-plot}
clean_1819 <- read_rds("clean_1819.rds") %>% 
  group_by(Grade) %>% 
  arrange(desc(Enrolment)) %>% 
  slice(1:20)

plot <- clean_1819 %>% 
  ggplot(aes(x = fct_reorder(as.factor(`Course Code`), desc(Enrolment)),
             y = Enrolment,
             fill = `Pathway or Destination`,
             text = paste("Course Code:", `Course Code`, "\n",
                          "Course Description:", `Course Description`, "\n",
                          "# of Students Enrolled:", Enrolment, "\n",
                          "Pathway/Destination:", `Pathway or Destination`))) +
  geom_col() +
  facet_wrap(~ Grade, scales = "free") +
  scale_y_continuous(labels = scales::comma_format()) +
  scale_x_discrete(labels = NULL, breaks = "", name = "") +
  ylim(0, 180000) +
  labs(title = "Secondary School Courses by Number of Students Enrolled (2018-2019)")

plot %>% 
  ggplotly(tooltip = "text") %>% 
  layout(width = 1000,
         height = 600,
         title = list(y = 0.97,
                      yanchor = "bottom"),
         legend = list(bgcolor = "#FFFFF0",
                       orientation = "v",
                       yanchor = "top",
                       y = 1))
```

